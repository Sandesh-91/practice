<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BookThrift </title>
    <link rel="icon" href="https://imgs.search.brave.com/d4ucdTf0_86-Rac29UMASyEVTeJDlAO1B8tnDHKg8is/rs:fit:0:180:1:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMuaWNvbi1pY29u/cy5jb20vNDA1L1BO/Ry85Ni9Cb29rc180/MDY3My5wbmc">
    <script type="module">
      import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

      window.supabase = createClient(
        "https://uypfqtomevkxudpuyzee.supabase.co",
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV5cGZxdG9tZXZreHVkcHV5emVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MzY4NTksImV4cCI6MjA3OTExMjg1OX0.dLfcjEdIXDMOpty0PhQFxL5mQFBPc9nzwaeZbjw7pZA"
      );
    </script>
    <link rel="stylesheet" href="styles/main.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
   
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
         <a href="index.html" >
          <h2 id="books">ðŸ“š BookThrift</h2>
         </a>
            
         
          
        </div>
        <div class="nav-links">
          <a href="#"  class="nav-link" onclick="showSection('home')">Home</a>
          <a href="#" class="nav-link" onclick="showSection('browse')"
            >Browse Books</a
          >
          <a href="#" class="nav-link" id="post" onclick="openPostFor('sell')"
            >Post a Book</a
          >
          <div id="auth-buttons">
            <button class="btn-outline" onclick="showSection('login')">
              Login
            </button>
            <button class="btn-primary" onclick="showSection('signup')">
              Sign Up
            </button>
          </div>
          <div id="user-menu" class="hidden">
            <div class="user-dropdown">
              <img id="user-avatar" src="" alt="Avatar" class="avatar" />
              <span id="username"></span>
              <div class="dropdown-content">
                <a href="#" onclick="showSection('profile')">Profile</a>
                <a href="#" onclick="showSection('my-books')">My Books</a>
                <a href="#" onclick="showSection('my-rentals')">My Rentals</a>
                <a href="#" onclick="logout()">Logout</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <main class="main-content">

      <section id="home" class="section active">
        <div class="hero">
          <h1>Share Books, Build Community</h1>
          <p>Buy, sell, donate, or rent books with people in your area</p>
          <div class="hero-buttons">
            <button
              class="btn-primary btn-large" id="find"
              onclick="openBrowseWithType('all', false)"
            >
              Find Books Near You
            </button>
            <button
              class="btn-outline btn-large" id="post"
              onclick="openPostFor('sell')"
            >
              Post a Book
            </button>
          </div>
        </div>

        <div class="features">
          <div class="feature-card">
            <i class="fas fa-book"></i>
            <h3>Buy & Sell</h3>
            <p>Find great deals on books in your neighborhood</p>
          </div>
          <div class="feature-card">
            <i class="fas fa-hand-holding-heart"></i>
            <h3>Donate</h3>
            <p>Share books with your community for free</p>
          </div>
          <div class="feature-card">
            <i class="fas fa-calendar-alt"></i>
            <h3>Rent</h3>
            <p>Rent books for a period and return them</p>
          </div>
        </div>
        <!-- <div class="enhanced-features">
          <div class="container">
            <h2 style="text-align: center; margin-bottom: 2rem">
              Why BookSwap Wins
            </h2>
            <div class="stats-grid">
              <div>
                <div class="stat-number">10K+</div>
                <div>Books Shared</div>
              </div>
              <div>
                <div class="stat-number">5K+</div>
                <div>Happy Readers</div>
              </div>
              <div>
                <div class="stat-number">500+</div>
                <div>Cities Worldwide</div>
              </div>
              <div>
                <div class="stat-number">95%</div>
                <div>Success Rate</div>
              </div>
            </div>
          </div>
        </div> -->

        <div class="quick-actions">
          <div class="action-card" onclick="showSection('browse')">
            <i
              class="fas fa-search"
              style="font-size: 2rem; margin-bottom: 1rem"
            ></i>
            <h3>Find Books</h3>
            <p>Discover books near you</p>
          </div>
          <div class="action-card" onclick="openPostFor('sell')">
            <i
              class="fas fa-plus"
              style="font-size: 2rem; margin-bottom: 1rem"
            ></i>
            <h3>Post a Book</h3>
            <p>Share your books</p>
          </div>
          <div class="action-card" onclick="openBrowseWithType('donate', true)">
            <i
              class="fas fa-gift"
              style="font-size: 2rem; margin-bottom: 1rem"
            ></i>
            <h3>For Donation</h3>
            <p>View books for donation</p>
          </div>
          <div class="action-card" onclick="openBrowseWithType('rent', true)">
            <i
              class="fas fa-calendar"
              style="font-size: 2rem; margin-bottom: 1rem"
            ></i>
            <h3>Rent</h3>
            <p>Borrow books temporarily</p>
          </div>
        </div>
      </section>

      <section id="login" class="section">
        <div class="auth-container">
          <h2>Welcome Back</h2>
          <form id="login-form" class="auth-form">
            <input type="email" id="login-email" placeholder="Email" required />
            <input
              type="password"
              id="login-password"
              placeholder="Password"
              required
            />
            <button type="submit" class="btn-primary">Login</button>
          </form>
          <p>
            Don't have an account?
            <a href="#" onclick="showSection('signup')">Sign up</a>
          </p>
        </div>
      </section>

      <section id="signup" class="section">
        <div class="auth-container">
          <h2>Join BookThrift</h2>
          <form id="signup-form" class="auth-form">
            <input
              type="email"
              id="signup-email"
              placeholder="Email"
              required
            />
            <input
              type="password"
              id="signup-password"
              placeholder="Password"
              required
            />
            <input
              type="text"
              id="signup-username"
              placeholder="Username"
              required
            />
            <input
              type="text"
              id="signup-fullname"
              placeholder="Full Name"
              required
            />
            <input
              type="text"
              id="signup-city"
              placeholder="Your City"
              required
            />
            <button type="submit" class="btn-primary">Create Account</button>
          </form>
        </div>
      </section>

      <section id="browse" class="section">
        <div class="search-header">
          <h2>Find Books Near You</h2>
          <div class="search-controls">
            <input
              type="text"
              id="search-input"
              placeholder="Search by title, author, or ISBN..."
            />
            <select id="book-type-filter">
              <option value="all">All Types</option>
              <option value="sell">For Sale</option>
              <option value="donate">Donation</option>
              <option value="rent">Rent</option>
            </select>
            <select id="condition-filter">
              <option value="all">Any Condition</option>
              <option value="new">New</option>
              <option value="like_new">Like New</option>
              <option value="good">Good</option>
              <option value="fair">Fair</option>
            </select>
            <input
              type="text"
              id="location-filter"
              placeholder="Your City (for distance calculation)"
            />
            <button onclick="searchBooks()" class="btn-primary">Search</button>
          </div>
        </div>
        <div id="books-grid" class="books-grid">
        </div>
      </section>

      
      <section id="post-book" class="section">
        <div class="form-container">
          <h2>Post a Book</h2>
          <form id="post-book-form" class="book-form">
            <div class="form-group">
              <label>Book Title *</label>
              <input type="text" id="book-title" required />
            </div>
            <div class="form-group">
              <label>Author *</label>
              <input type="text" id="book-author" required />
            </div>
            <div class="form-group">
              <label>ISBN (Optional)</label>
              <input type="text" id="book-isbn" />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Price (Rs)</label>
                <input type="number" id="book-price" step="0.01" min="0" />
              </div>
              <div class="form-group">
                <label>Condition</label>
                <select id="book-condition" required>
                  <option value="new">New</option>
                  <option value="like_new">Like New</option>
                  <option value="good">Good</option>
                  <option value="fair">Fair</option>
                </select>
              </div>
              <div class="form-group">
                <label>Type</label>
                <select id="book-type" required>
                  <option value="sell">Sell</option>
                  <option value="donate">Donate</option>
                  <option value="rent">For Rent</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="book-description" rows="4"></textarea>
            </div>
            <div class="form-group">
              <label>Your City *</label>
              <input type="text" id="book-city" required />
            </div>
            <div class="form-group">
              <label>Book Images</label>
              <input type="file" id="book-images" multiple accept="image/*" />
              <div id="image-preview"></div>
            </div>
            <button type="submit" class="btn-primary">Post Book</button>
          </form>
        </div>
      </section>

      <section id="book-detail" class="section">
        <div id="book-detail-content">
        
        </div>
      </section>
     
      <section id="profile" class="section">
        <div class="form-container">
          <h2>My Profile</h2>
          <form id="profile-form" class="auth-form">
            <input
              type="text"
              id="profile-username"
              placeholder="Username"
              required
            />
            <input
              type="text"
              id="profile-fullname"
              placeholder="Full Name"
              required
            />
            <input type="text" id="profile-city" placeholder="City" required />
            <button type="submit" class="btn-primary">Update Profile</button>
          </form>
        </div>
      </section>

      <section id="my-books" class="section">
        <h2>My Books</h2>
        <div id="my-books-grid" class="books-grid">
        </div>
      </section>

      <section id="my-rentals" class="section">
        <h2>My Rentals</h2>
        <div class="rental-tabs">
          <button class="tab-btn active" onclick="showRentalTab('requests')">
          </button>
          <button class="tab-btn" onclick="showRentalTab('received')">
          </button>
        </div>
        <div id="rental-requests" class="tab-content active">
        </div>
        <div id="received-requests" class="tab-content">
        </div>
      </section>
    </main>

    <div id="loading" class="loading hidden">
      <div class="spinner"></div>
    </div>

    <div id="toast" class="toast hidden"></div>
    <script src="scripts/books.js" defer></script>
    <script src="scripts/config.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/app.js"></script>
  </body>
</html>